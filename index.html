<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	<div class="left">
		<h1 id="left"></h1>
	</div>
	<div class="center">
		<h1 id="center"></h1>
	</div>
	<div class="right">
		<h1 id="right"></h1>
	</div>
	<button onclick="switchLanguage()" class="switch" id="switcher">SWITCH</button>
	<script type="text/javascript">
		var defaultLang = 'EN',
		lang = localStorage.getItem('lang');

		var translations = {
			'EN' : {
				'left':'Left',
				'right':'Right',
				'center':'Center',
				'switcher':'Switch',
				'title' :'RTL TEST',
			},
			'AR' : {
				'left':'يمين',
				'right':'يسار',
				'center':'منتصف',
				'switcher':'تغيير',
				'title' :'يمين الى يسار',
			},
		};

		function switchLanguage(){
			if(lang === 'AR'){
				removeArabic();
				return;
			}

			if(lang === 'EN'){
				addArabic();
				return;
			}
		}

		function setContent(){
			for (translation in translations[lang]){
				if(translation !== 'title'){
					document.getElementById(translation).innerHTML = translations[lang][translation];
				}else{
					document.title = translations[lang][translation];
				}
			}
		}

		function addArabic(){
			localStorage.setItem('lang','AR');
			lang = 'AR';
			var head = document.head,
			link = document.createElement('link');
			link.href="style-rtl.css";
			link.type="text/css";
			link.rel="stylesheet";
			link.id="arabic-sheet";
			head.appendChild(link);
			setContent();
			return;
		}

		function removeArabic(){
			localStorage.setItem('lang',defaultLang);
			lang = defaultLang;
			var sheet = document.getElementById('arabic-sheet');
			if(sheet){
				sheet.remove();
			}
			setContent();
			return;
		}

		(function(){
			if(!lang || lang === 'EN'){
				removeArabic();
				return;
			}

			if(lang === 'AR'){
				addArabic();
				return;
			}
		})();
	</script>
</body>
</html>